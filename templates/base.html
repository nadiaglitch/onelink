{% load static %}

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>OneLink</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="{% static 'css/site.css' %}">

    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'favicon/apple-touch-icon.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'favicon/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'favicon/favicon-16x16.png' %}">
    <link rel="icon" type="image/png" sizes="192x192" href="{% static 'favicon/android-chrome-192x192.png' %}">
    <link rel="icon" type="image/png" sizes="512x512" href="{% static 'favicon/android-chrome-512x512.png' %}">

</head>
<body class="{% block body_class %}{% endblock %}">

  <header class="site-header" role="banner">
    <div class="container header-inner">
      <!-- Logo (left) -->
      <img src="{% static 'images/logo.png' %}" alt="Logo" class="logo">

      {% if request.resolver_match.url_name != 'index' %}
        <!-- Mobile menu button -->
        <button class="nav-toggle" aria-expanded="false" aria-controls="site-nav" aria-label="Toggle navigation">
          <span class="bar"></span><span class="bar"></span><span class="bar"></span>
        </button>

        <!-- Nav (right) -->
        <nav id="site-nav" class="nav-links" role="navigation">
          <ul>
            {% if request.user.is_authenticated %}
              <li><a href="{% url 'link-list' %}">Edit Profile</a></li>
              <li><a href="{% url 'logout' %}">Log Out</a></li>
            {% else %}
              <li><a href="{% url 'index' %}">Log In</a></li>
            {% endif %}
          </ul>
        </nav>
      {% endif %}


    </div>
  </header>
  <main role="main">
    {% block content %}{% endblock %}
  </main>
  <script>
  (function(){
    const btn = document.querySelector('.nav-toggle');
    const nav = document.getElementById('site-nav');
    if(!btn || !nav) return;

    btn.addEventListener('click', () => {
      const isOpen = nav.classList.toggle('open');
      btn.setAttribute('aria-expanded', String(isOpen));
    });

    // Close on Escape
    document.addEventListener('keydown', (e) => {
      if(e.key === 'Escape' && nav.classList.contains('open')){
        nav.classList.remove('open');
        btn.setAttribute('aria-expanded', 'false');
        btn.focus();
      }
    });
  })();
  </script>

{% block modals %}{% endblock %}

</body>
</html>
